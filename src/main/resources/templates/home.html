<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Compras - Home</title>
</head>
    <body>
        <div class="container">
            <h1>üõí Produtos Cadastrados</h1>
            
            <div th:if="${successMessage}" class="alert-success">
                <p th:text="${successMessage}"></p>
            </div>

            <div class="nav-links">
                <a th:href="@{/produtos/novo}" class="btn-primary">‚ûï Cadastrar Novo Produto</a>
                <a th:href="@{/categorias}" class="btn-secondary">‚öôÔ∏è Gerenciar Categorias</a>
            </div>
            
            <hr/>
            
            <h2>Lista de Produtos</h2>
            <table class="data-table" border="1" cellpadding="5" cellspacing="0">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Categoria</th>
                        <th>Pre√ßo</th>
                        <th>Estoque</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:if="${productPage.empty}" class="empty-row">
                        <td colspan="6">Nenhum produto cadastrado!</td>
                    </tr>
                    <tr th:each="product : ${productPage.content}">
                        <td th:text="${product.name}">Nome do Produto</td>
                        <td th:text="${product.category.name}">Categoria X</td>
                        <td th:text="${#numbers.formatCurrency(product.price)}">R$ 99.99</td>
                        <td th:text="${product.stockQuantity}">100</td>
                        <td class="actions">
                            <a th:href="@{/produtos/detalhes/{id}(id=${product.id})}" title="Ver Detalhes" class="btn-detail">Detalhes</a>
                            |
                            <a th:href="@{/produtos/editar/{id}(id=${product.id})}" title="Editar" class="btn-edit">Editar</a>
                            |
                            <form th:action="@{/produtos/excluir/{id}(id=${product.id})}" method="post" class="form-delete" onsubmit="return confirm('Tem certeza que deseja excluir este produto?');">
                                <button type="submit" title="Excluir" class="btn-delete">Excluir</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <div class="pagination">
                <div th:if="${productPage.totalPages > 1}">
                    <span th:if="${!productPage.first}">
                        <a th:href="@{/(page=${productPage.number - 1})}" class="btn-page">Anterior</a>
                    </span>
                    
                    <span th:each="i : ${#numbers.sequence(0, productPage.totalPages - 1)}" class="page-number">
                        <a 
                            th:href="@{/(page=${i})}" 
                            th:text="${i + 1}" 
                            th:classappend="${i == productPage.number} ? 'active' : ''"
                        >1</a>
                    </span>

                    <span th:if="${!productPage.last}">
                        <a th:href="@{/(page=${productPage.number + 1})}" class="btn-page">Pr√≥xima</a>
                    </span>
                </div>
            </div>
        </div> 
    </body>
</html>